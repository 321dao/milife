# 交易上下文

## 聚合根
- **商品**（ID、名称、价格、数量、序列号、抢购记录ID列表、评价ID列表、付款ID列表、商品状态）
- **抢购**（ID、商品ID、抢购者ID、数量）
- **订单**（ID、订单单项列表、总额）
- **商品评价**（ID、商品ID、抢购者ID、内容、时间）

> 注：商品聚合根的**抢购记录ID列表** 是为了保证条件【抢购者最多只能抢购3个同种商品】一致性</br>
> **评价ID列表**和**付款ID列表** 是为了保证条件【客户只能对已支付的商品评价一次】一致性

## 值对象
- **商家**、**抢购者**、**订单单项**等

## 商品聚合根相关
- **领域服务** 发布、审核、上线
- **命令** 发布、审核、上线、下线、抢购、评价
- **事件** 发布、审核通过/不通过、上线、下线、抢购成功、抢购失败、评价、评论重复
- **商品状态** 发布、审核通过、审核不通过、上线、下线、抢购完成

## 抢购聚合根相关
- **领域服务** 抢购
- **命令** 开始抢购、抢购成功、抢购失败
- **事件** 抢购开始、抢购成功、抢购失败
    
## 订单聚合根相关
- **领域服务** 创建、取消、支付
- **命令** 创建、取消、支付、支付成功、支付失败
- **事件** 已创建、已取消、开始支付、支付成功、支付失败
    
## 商品评论聚合根相关
- **领域服务** 评论
- **命令** 创建、评论成功、评论失败
- **事件** 已创建、评论成功、评论失败

